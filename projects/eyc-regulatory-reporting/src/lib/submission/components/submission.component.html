<lib-dots-card (filingDetails)="receiveFilingDetails($event)" (fileStatus)="getFileStatus($event)"></lib-dots-card>

<div class="mark-button-comp">
    <button *ngIf="permissions.validatePermission('Submission', 'Complete Filing')" motifButton color="primary" size="large" (click)="statusUpdateToComplete()" [disabled]= "enableComplete">Mark filing complete</button>
</div>

<motif-toast [type]="'success'" [show]="showToastAfterDownload">{{ downloadMsg }} </motif-toast>
<motif-toast [type]="'success'" [show]="showToastAfterStatusChange">{{ filingStatusChangeMsg }} </motif-toast>

<div class="submission-content-container">
    <div class="approve-button">
      <button *ngIf="permissions.validatePermission('Submission', 'Download Files')" motifButton color="primary" size="large" (click)="approveSelected()" [disabled]= "selectedRows.length==0">Download selected</button>
<!--  <lib-download [buttonLabel]="'Download selected'" [downloadFilesList]="selectedRows" (downloadFilesEmitter)="donwloadFilesOnSelected($event)"></lib-download>    </div>
 -->    <section id="xml-files-list">
       
        <div [hidden]="noFilesDataAvilable">
            <motif-table title="Answer Files" [columnDefs]="columnDefs" [rowData]="rowData" [defaultColDef]="{
        headerCheckboxSelection: isFirstColumn,
        checkboxSelection: isFirstColumn}" rowSelection="multiple" (gridReady)="handleGridReady($event)" [firstColumnBorderRight]="true"
                [suppressRowClickSelection]="true" [suppressCellSelection]="true" [pagination]="false" paginationPageSize="10"
                (rowSelected)="onRowSelected()" [ngClass]="!rowData ? 'cursor-default' : ''" ></motif-table>
        </div> 
        <ng-template #dateSubmittedTemplate let-row>
            <div>{{row.dateSubmitted | date : 'MMM dd y hh:mma'| uppercase | dateSubmittedPipe}}</div>
        </ng-template>
    </section>
    <ng-template #statusTemplate let-row>
        <span class="status_icon">
            <motif-icon [src]="'/assets/icons/image/ic_brightness_1_24px.svg'"></motif-icon>
        </span>
        <div>{{row.status}}</div>
        <span class="edit_icon" [ngClass]="{'disabled': selectedRows.length!=0}"
            *ngIf="permissions.validatePermission('Submission', 'File Status Change') && !(filingDetails.status[4].progress === null || filingDetails.status[4].progress === 'COMPLETED' || filingDetails.status[4].progress === 'Completed')">
            <motif-icon [src]="'/assets/icons/editor/ic_mode_edit_24px.svg'" (click)="enableUpdateStatusModal(row, 'single')">
            </motif-icon>
        </span>
    </ng-template>
</div>
<motif-modal [show]="updateStatusModal" (close)="updateStatusModal = false">
    <motif-modal-header>
        Change Status
    </motif-modal-header>
    <motif-modal-body>
        <p> </p>
        <form [formGroup]="updateStatusForm">
            <motif-form-field>
                <motif-radio-group aria-labelledby="radio-group-label-2" formControlName="status">
                    <motif-radio-button value="Draft">Draft</motif-radio-button>
                    <br>
                    <motif-radio-button value="Submitted to client">Submitted to client</motif-radio-button>
                    <br>
                    <motif-radio-button value="Submitted to regulator">Submitted to regulator</motif-radio-button>
                </motif-radio-group>
            </motif-form-field>
        </form>
        <p *ngIf="isUpdateStatusError" class="error_msg">{{updateStatusErrorMsg}}</p>
    </motif-modal-body>
    <motif-modal-footer>
        <button motifButton color="primary-alt" [disabled]="updateStatusForm.invalid"
            (click)="onSaveChangeStatus()">Save</button>
        <button motifButton color="secondary" (click)="onCancelChangeStatus()">Cancel</button>
    </motif-modal-footer>
</motif-modal>